<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.it.every.openSubj.model.OpenSubjDAO">

	<select id="selectByProfNo" parameterType="String" resultType="openSubjVo" >
		select * from open_subj
		where prof_no=#{prof_no}
	</select>
	
	
	<!-- 개설교과과목 전체조회  -->
	<select id="OpenRegistraionALL" resultType="map">
		select sj.type, st.* ,prof.prof_name ,os.*
		from 
		subject st join subj_type sj
		on st.type_code= sj.type_code
		join professor prof
		on prof.prof_no = st.prof_no
		join open_subj os
		on os.subj_code = st.subj_code
	</select>
	
	
	
	<!-- 개설교과과목 전체조회 + 검색  -->
	<select id="OpenRegistraionSearch" resultType="map"  parameterType="RegistrationSearchVO">
		select sj.type, st.* ,prof.prof_name ,os.*
		from 
		subject st join subj_type sj
		on st.type_code= sj.type_code
		join professor prof
		on prof.prof_no = st.prof_no
		join open_subj os
		on os.subj_code = st.subj_code
		where 1=1
			<!-- <if test="facultyNo!=0">and d.faculty_no=#{facultyNo}</if> 년도
			<if test="depNo!=0">and d.dep_no=#{depNo}</if> 학기
			<if test="subjName!=null">and s.subj_name like '%' || #{subjName} || '%'</if> 학년
			<if test="time1!='all' and time2=='all'">and rt.short_names like '%' || #{time1} || '%'</if> 이수구분
			<if test="time2!='all' and time1=='all'">and rt.short_names like '%' || #{time2} || '%'</if> 학과 학과는 인풋박스로 할까?
			<if test="time1!='all' and time2!='all'">and rt.short_names like '%' || #{time} || '%'</if> 전공은 셀렉트 박스? 
			<if test="profName!=null">and p.prof_name like '%' || #{profName} || '%'</if> 교과목번호 
			<if test="openSubCode!=null">and o.open_sub_code like '%' || #{openSubCode} || '%'
			</if> -->
	</select>






	<!-- 학과 찾는거 -->
	<select id="selectFacultyS" resultType="map">
		select distinct faculty_name from faculty
	</select>
	
	<!-- 이수구분 찾는거 -->
	<select id="selectTypeS" resultType="map">
		select distinct type from subj_type
	</select>
	
	
</mapper>