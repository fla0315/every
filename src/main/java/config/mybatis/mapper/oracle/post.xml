<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.it.every.post.model.PostDAO">

<insert id="freewrite" parameterType="PostVO">
<selectKey resultType="int" keyProperty="postNo" order="BEFORE">
			select post_seq.nextval from dual
		</selectKey>
	insert into post(post_no,contents,bd_code,title,is_private,reg_date,writer_code,del_flag,read_count )
		values(#{postNo},#{contents},#{bdCode},#{title},#{isPrivate},sysdate,#{writerCode},#{delFlag},0)

</insert>

<select id="freepost" resultType="PostVO">
select post_no,title,contents,reg_date,writer_code,read_count from post  
where DEL_FLAG='N'
</select> 

<select id="detail" parameterType="int" resultType="PostVO">
 select post_no,title,contents,reg_date,writer_code,read_count,contents from post
 where DEL_FLAG='N' and post_no=#{post_no}
</select>

<update id="deletepost" parameterType="int">

update post
set DEL_FLAG='Y'
where post_No=#{post_NO}
</update>

<update id="updatecount" parameterType="int">
	update post
	set read_count=read_count+1
	where post_no=#{post_no}

</update>

<select id="mylist" parameterType="String" resultType="PostVO">
	select post_no,title,contents,reg_date,writer_code,read_count,contents from post
	where DEL_FLAG='N' and writer_code=#{writer_code} 

</select>


<update id="updatepost" parameterType="PostVO">

update post
set title=#{title},is_private=#{isPrivate},contents=#{contents},edit_date=sysdate
where post_No=#{post}
</update>

</mapper>