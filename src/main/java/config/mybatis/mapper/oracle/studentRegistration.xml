<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.it.every.registration.model.StudentRegistrationDAO">
		<sql id="searchWhere">
			<if test="searchKeyword!=null and searchKeyword!=''">
				where ${searchCondition}  like '%' || #{searchKeyword} || '%'
			</if>
		</sql>
		
		
		
	<!-- 수강신청  -->
	<insert id="insertRegistarion" parameterType="registrationVo">
		insert into registration(open_sub_code,stu_no,classification,score,lecture_eval_flag)
		values(#{openSubCode},#{stuNo},${classification},100,'Y')
	</insert>
		
		
	<!-- 나의 수강신청 내역조회 -->
		<select id="searchMyRegistarion" parameterType="searchVo" resultType="map">
				select * from 
				subject st join subj_type sj
				on st.type_code= sj.type_code
				join professor prof
				on prof.prof_no = st.prof_no
				join open_subj os
				on os.subj_code = st.subj_code
				join registration rs
				on rs.open_sub_code = os.open_sub_code
				join student stu
				on stu.stu_no = rs.stu_no
				where stu.student_id=#{studentId}
		</select>
	

	
</mapper>