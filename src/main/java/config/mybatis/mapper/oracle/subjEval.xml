<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.it.every.subjEval.model.SubjEvalDAO">

	<!-- 수강신청화면에서 보여지는 수강신청 내역들 -->
	<select id="selectMyRegistarion" parameterType="String" resultType="map">
		select * from 
		subject st join subj_type sj
		on st.type_code= sj.type_code
		join professor prof
		on prof.prof_no = st.prof_no
		join open_subj os
		on os.subj_code = st.subj_code
		join registration rs
		on rs.open_sub_code = os.open_sub_code
		join student stu
		on stu.stu_no = rs.stu_no
		where stu.student_id=#{studentId} and st.semester = '2학기' and st.subj_year = '2021'
	</select>
	
	
	
	<insert id="insertSubjEvalStudent" parameterType="SubjEvalVO">
		insert into subj_eval(open_sub_code,stu_no,classification,q1,q2,q3,q4,q5,content)
		values(#{openSubCode}, #{stuNo}, #{classification}, #{q1}, #{q2}, #{q3}, #{q4}, #{q5}, #{content})
	</insert>
	
	
	
	<select id="searchEvalFlag" parameterType="String" resultType="map">
		select open_sub_code, count(*) as count from subj_eval
		where stu_no =#{stuNo}
		group by open_sub_code
	</select>
	
	
</mapper>







